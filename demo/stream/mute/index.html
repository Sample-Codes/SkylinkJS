<html lang="en">
<head>
  <title>Stream : Audio & Video Call</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <!-- Configure for styling for demo purposes -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" rel="stylesheet"> 
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.5/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>
  <style>
    .navbar .navbar-text {
      font-weight: 600;
      text-transform: capitalize;
    }

    .btn {
      cursor: pointer;
    }

    .btn.disabled {
      cursor: initial!important;
    }

    .view {
      padding: 15px;
    }

    .view .view-content {
      padding: 15px 12px;
      border: solid 1px #ccc;
      border-radius: 7px;
      font-size: 14px;
    }

    .view .view-content h4 {
      font-size: 18px;
    }

    .view .view-content .alert {
      display: none;
    }

    .view .view-content .content-media .video {
      margin: 15px 0 0;
      background: #ccc;
      border: solid 1px #fff;
      border-radius: 7px;
      width: 100%;
      height: 185px;
      transition: background 1s ease-in-out;
      -webkit-transition: background 1s ease-in-out;
      -moz-transition: background 1s ease-in-out;
    }

    .view .view-content .content-media .video.active {
      background: #000;
    }

    .view .view-content .content-media .video.current {
      border-color:#007bff;
    }

    .view .view-content .content-media p {
      margin: 10px 0 7px;
      color: #686868;
    }

    .view .view-content .content-media-info {
      margin-top: 15px;
      border-top: solid 1px #eeee;
      padding-top: 15px;
    }

    .view .view-content .content-media-info h5 {
      font-size: 14px;
      font-weight: 600;
    }

    .view .view-content .content-media-info p {
      margin: 0 0 5px;
    }

    .view .view-content .content-media-info #connect.btn {
      margin-top: 25px;
      display: block;
    }

    .view .view-content .content-media-info .btn-group {
      margin: 19px 0 0;
    }

    
    

  </style>

  <!-- Configure for testing hash authentication -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/hmac-sha1.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/enc-base64.js"></script>

  <!-- Configure for hosting from repository -->
  <script src="../../../publish/skylink.complete.js"></script>
  <script src="../../config.js"></script>

  <!-- Configure for hosting individually:
    <script src="https://cdn.temasys.io/skylink/skylinkjs/0.6.x/skylink.complete.js"></script>
    <script>
      var config = {
        appKey: 'xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx',
        defaultRoom: 'audio-video'
      };
    </script>
  -->
</head>
<body>
  <nav class="navbar navbar-light bg-light">
    <div class="container">
      <span class="navbar-text">Select the media and muted settings, and then join the call to see how it appears in the remote Peer viewing end.</span>
    </div>
  </nav>

  <div class="container">
    <div class="row">
      <div id="local-view" class="col-8 view">
        <div class="view-content">
          <h4>Self Peer View</h4>
          <div id="local-view-error" class="alert alert-danger" role="alert"></div>
          <div class="row">
            <div class="col-6 content-media">
              <video id="video-camera" class="video" autoplay="true"></video>
              <p><b>Media (Camera):</b> <span id="video-camera-info">None</span></p>
            </div>
            <div class="col-6 content-media">
              <video id="video-screen" class="video" autoplay="true"></video>
              <p><b>Media (Screen):</b> <span id="video-screen-info">None</span></p>
            </div>
            <div class="col-12 content-media-info">
              <h5>Media & Muted Settings</h5>
              <div class="btn-group" role="group" data-toggle="buttons">
                <label class="btn btn-outline-dark btn-sm"><input type="radio" name="media" id="media-av" autocomplete="off">Audio & Video</label>
                <label class="btn btn-outline-dark btn-sm"><input type="radio" name="media" id="media-as" autocomplete="off">Audio & Screen</label>
                <label class="btn btn-outline-dark btn-sm"><input type="radio" name="media" id="media-a" autocomplete="off">Audio Only </label>
                <label class="btn btn-outline-dark btn-sm"><input type="radio" name="media" id="media-v" autocomplete="off">Video Only</label>
                <label class="btn btn-outline-dark btn-sm"><input type="radio" name="media" id="media-s" autocomplete="off">Screen Only</label>
                <label class="btn btn-outline-dark btn-sm active"><input type="radio" name="media" id="media-none" autocomplete="off" checked>None</label>
              </div>

              <div class="btn-group" role="group" data-toggle="buttons">
                <label class="btn btn-outline-info btn-sm"><input type="checkbox" id="audio-mute" autocomplete="off">Audio Muted</label>
                <label class="btn btn-outline-info btn-sm"><input type="checkbox" id="video-mute" autocomplete="off">Video Muted</label>
              </div>

              <button id="connect" class="btn btn-primary">Join Room</button>
            </div>
          </div>
        </div>
      </div>

      <div id="remote-view" class="col-4 view">
        <div class="view-content">
          <h4>Remote Peer View</h4>
          <div id="remote-view-error" class="alert alert-danger" role="alert"></div>
          <div class="row">
            <div class="col-12 content-media">
              <video id="video-remote" class="video" autoplay="true"></video>
              <p><b>Media:</b> <span id="video-remote-info">Not Connected</span></p>
              <p><b>Muted Status:</b> <span id="video-remote-mute-info">Not Connected</span></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    var skylink = {
      local: new Skylink(),
      remote: new Skylink()
    };

    skylink.remote.on('incomingStream', function (peerId, stream, isSelf, peerInfo) {
        
    });

    skylink.remote.on('peerLeft', function (peerId, peerInfo, isSelf) {
      if (isSelf) return;

    });

    function setState (which, state, error) {
      
    }

    skylink.remote.init(config, function (remoteInitErr) {
      skylink.remote.joinRoom(function (remoteJoinRoomErr) {
        skylink.local.init(config, function (localInitErr) {


        });
      });
    });


  </script>
</body>
</html>